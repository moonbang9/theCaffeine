<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.theCaffeine.mes.qlty.mapper.QltyMapper">

	<select id="getMtrlCheckList" parameterType="QltyVO">
		SELECT p.mt_placeod_cd,
		       p.cli_cd,
		       p.mt_cd,
		       p.placeod_qt,
		       p.placeod_reqdt,
		       p.placeod_compdt,
		       p.placeod_requester,
		       p.placeod_chg,
		       p.placeod_st,
		       m.mt_name,
		       c.cli_name
		  FROM mt_placeod p 
		  JOIN mt m ON p.cli_cd = m.cli_cd
		  JOIN cli c ON p.cli_cd = c.cli_cd
	  ORDER BY p.mt_placeod_cd	        
	     <!-- WHERE PLACEOD_ST=4 --> 
	     <!-- 검사 완료 후 상태값을 4에서 5로 바꿔줘야됨. -->
	</select>
	
	<insert id="insertMcRes" parameterType="QltyVO">
		INSERT INTO mt_ck
					(mt_ck_no
					,mt_cd
					,str_qt <!-- 입고 수량인데 발주 수량으로 교체할것 -->
					,cli_name
					,str_chg <!-- 입고 담당자인데 발주 담당자로 교체할것 -->
					,ck_name
					,first_mc
					,second_mc
					,third_mc
					,fourth_mc
					,fifth_mc
					,mc_avg
					,mc_res
					,ck_dt
					,ck_chg
					,pass_std
					,mt_placeod_cd		
					)
			VALUES (
				    seq_mt_ck_no.nextval
				   ,#{mtCd}
				   ,#{strQt}
				   ,#{cliName}
				   ,#{strChg}
				   ,#{ckName}
				   ,#{firstMc}
				   ,#{secondMc}
				   ,#{thirdMc}
				   ,#{fouthMc}
				   ,#{fifthMc}
				   ,#{mcAvg}
				   ,#{mcRes}
				   ,sysdate
				   ,#{ckChg}
				   ,#{passStd}
				   ,#{mtPlaceodCd}
				   ) 
	</insert>
	
</mapper>