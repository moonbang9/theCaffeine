<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/index}">
<head>
<meta charset="UTF-8">
<title>facility</title>
</head>
<body>
	<div layout:fragment="content">
		<h1>설비관리페이지</h1>
		<div id="example-table">


			<!-- Vertically Centered Modal -->
			<div class="col-lg-4 col-md-6">
				<div class="mt-3">
					<!-- Button trigger modal -->
					<button type="button" class="btn btn-primary"
						data-bs-toggle="modal" data-bs-target="#modalCenter">
						등록</button>

					<!-- Modal -->
					<div class="modal fade" id="modalCenter" tabindex="-1"
						aria-hidden="true">
						<div class="modal-dialog modal-dialog-centered" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="modalCenterTitle">설비 등록</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal"
										aria-label="Close"></button>
								</div>
								<div class="modal-body" id="facilityForm">
									<div class="row">
										<div class="col mb-3">
											<div class="input-group">
												<span class="input-group-text" id="basic-addon14">설비명</span>
												<input type="text" class="form-control" id="facilityName"
													aria-describedby="basic-addon14">
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col mb-3">
											<div class="input-group">
												<span class="input-group-text" id="basic-addon14">제조업체</span>
												<input type="text" class="form-control" id="manufacturingCom"
													aria-describedby="basic-addon14">
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col mb-3">
											<div class="input-group">
												<label class="input-group-text" for="inputGroupSelect01">투입공정</label>
												<select class="form-select" id="insertedMf">
													<option selected>선택</option>
													<option value="0">로스팅</option>
													<option value="1">포장</option>
												</select>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col mb-3">
											<div class="input-group">
												<span class="input-group-text" id="basic-addon14">입고일자</span>
												<div class="col-md-10">
						                          <input class="form-control" type="date" value="2024-04-01" id="strDate">
						                        </div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col mb-3">
											<div class="input-group">
												<label class="input-group-text" for="inputGroupSelect01">설비상태</label>
												<select class="form-select" id="fcltstatus">
													<option selected value="0">가동</option>
													<option value="1">비가동</option>
												</select>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col mb-3">
											<div class="input-group">
												<span class="input-group-text" id="basic-addon14">점검주기</span>
												<input type="text" class="form-control" id="inspectionCycle"
													aria-describedby="basic-addon14"> &nbsp;  일 
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col mb-3">
											<div class="input-group">
												<span class="input-group-text" id="basic-addon14">생산량</span>
												<input type="text" class="form-control" id="coffeeoutput"
													aria-describedby="basic-addon14"> &nbsp;  KG
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col mb-3">
											<div class="input-group">
												<span class="input-group-text" id="basic-addon14">소요시간</span>
												<input type="datetime" class="form-control" id="durationTime"
													aria-describedby="basic-addon14"> &nbsp;  분
											</div>
										</div>
								</div>
								</div>
									<div class="modal-footer">
									<button type="button" class="btn btn-outline-secondary"
										data-bs-dismiss="modal">취소</button>
									<button type="button" class="btn btn-primary" id="saveBtn">설비 등록</button>
								</div>
							</div>
						</div>
					</div>
					
					<div id="fcltListTable" class=></div>
				</div>
			</div>
			<script>
	saveBtn.addEventListener("click", e=> {
		if(facilityName.value == ""){
			alert("설비명이 입력되지 않았습니다.");
			facilityName.focus();
		}else {
			saveReq();
		}
	})
	
	// 등록 요청
	function saveReq() {
		const fcName= facilityName.value;
		const st= fcltstatus.value;
		const insMf= insertedMf.value;
		const mnfCom= manufacturingCom.value;
		const strDt= strDate.value;
		const insCycle= inspectionCycle.value;
		const durTime = durationTime.value;
		const output = coffeeoutput.value;
		let param = {fcName,mnfCom,insMf, strDt,st,insCycle, output,durTime };
		console.log(param);
		fetch("/fclt/insert",{
			method : "post",
			headers: {
			      "Content-Type": "application/json",
			    },
			body : JSON.stringify(param)
		})
		.then(res => res.json())
		.then(res => saveRes(res))
	}
	
	// 등록 응답
	function saveRes(res) {
		alert("설비등록이 완료되었습니다.");
		location.href= "/fclt/facilitylist"
	}
	</script>
		</div>
	</div>
	
	
</body>
</html>